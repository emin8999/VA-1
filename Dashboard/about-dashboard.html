<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>About ‚Äî Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg: #0b0b0b;
        --fg: #f7f7f7;
        --muted: #b8b8b8;
        --acc: #e0b873;
        --card: #151515;
        --line: #222;
      }
      html,
      body {
        margin: 0;
        background: var(--bg);
        color: var(--fg);
        font-family: Inter, system-ui, Arial;
      }
      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 24px;
      }
      h1,
      h2,
      h3 {
        color: var(--acc);
      }
      .card {
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: 16px;
        padding: 16px;
        margin: 24px 0;
      }
      .row {
        display: grid;
        gap: 8px;
        margin: 8px 0;
      }
      .row-inline {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin: 8px 0;
        align-items: center;
      }
      input,
      textarea {
        background: #0f0f0f;
        color: var(--fg);
        border: 1px solid var(--line);
        border-radius: 10px;
        padding: 10px;
      }
      textarea {
        min-height: 80px;
      }
      .btn {
        background: var(--acc);
        color: #111;
        font-weight: 700;
        border-radius: 12px;
        padding: 10px 14px;
        cursor: pointer;
        border: none;
      }
      .btn-danger {
        background: #b64c4c;
        color: #fff;
      }
      .btn-ghost {
        background: #1b1b1b;
        color: var(--fg);
        border: 1px solid var(--line);
      }
      .preview-img {
        width: 100%;
        max-width: 260px;
        border-radius: 12px;
        border: 1px solid var(--line);
        object-fit: cover;
        margin-top: 8px;
      }
      .grid2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      .list {
        display: grid;
        gap: 12px;
        margin-top: 8px;
      }
      .badge {
        background: #1d1d1d;
        color: var(--muted);
        padding: 2px 8px;
        border-radius: 8px;
        font-size: 12px;
      }
      .sep {
        border: 0;
        border-top: 1px dashed var(--line);
        margin: 14px 0;
      }
      .preview-box {
        padding: 12px;
        background: #111;
        border-radius: 10px;
        margin-bottom: 12px;
      }
      .item-line {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        flex-wrap: wrap;
        padding: 10px;
        border: 1px solid var(--line);
        border-radius: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>About ‚Äî Dashboard</h1>
      <p style="color: var(--muted)">
        –†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã <b>about.html</b>. –•–µ–¥–µ—Ä –∏ —Ñ—É—Ç–µ—Ä –Ω–µ
        –∏–∑–º–µ–Ω—è—é—Ç—Å—è.
      </p>

      <!-- HERO -->
      <div class="card">
        <h2>Hero</h2>
        <div class="preview-box" id="heroPreviewBox"></div>
        <div class="grid2">
          <div>
            <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
            <input id="heroTitle" />
            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea id="heroText"></textarea>
            <label>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ ;)</label>
            <input id="heroTags" />
          </div>
          <div>
            <label>–§–æ—Ç–æ</label>
            <div class="row-inline">
              <input type="file" id="heroImg" accept="image/*" />
              <button class="btn btn-ghost" id="heroRemoveBtn" type="button">
                –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ
              </button>
            </div>
            <img
              id="heroImgPreview"
              class="preview-img"
              style="display: none"
            />
          </div>
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveHero()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å Hero</button>
        </div>
      </div>

      <!-- MISSION -->
      <div class="card">
        <h2>Mission</h2>
        <div class="preview-box" id="missionPreviewBox"></div>
        <div class="grid2">
          <div>
            <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
            <input id="missionTitle" />
            <label>–¢–µ–∫—Å—Ç</label>
            <textarea id="missionText"></textarea>
            <label>–ë—É–ª–ª–µ—Ç—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</label>
            <textarea id="missionBullets"></textarea>
          </div>
          <div>
            <label>–§–æ—Ç–æ</label>
            <div class="row-inline">
              <input type="file" id="missionImg" accept="image/*" />
              <button class="btn btn-ghost" id="missionRemoveBtn" type="button">
                –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ
              </button>
            </div>
            <img
              id="missionImgPreview"
              class="preview-img"
              style="display: none"
            />
          </div>
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveMission()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å Mission</button>
        </div>
      </div>

      <!-- DISCIPLINES -->
      <div class="card">
        <h2>Disciplines</h2>
        <div class="preview-box" id="disciplinesPreviewBox"></div>
        <div class="row-inline">
          <input id="discTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
          <input
            id="discDesc"
            placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"
            style="min-width: 240px"
          />
          <input type="file" id="discImg" accept="image/*" />
          <button class="btn" onclick="addDiscipline()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveDisciplines()">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å Disciplines
          </button>
        </div>
      </div>

      <!-- STATS -->
      <div class="card">
        <h2>Stats</h2>
        <div class="preview-box" id="statsPreviewBox"></div>
        <div class="row-inline">
          <input id="statValue" placeholder="10+" />
          <input
            id="statLabel"
            placeholder="–ª–µ—Ç –æ–ø—ã—Ç–∞"
            style="min-width: 200px"
          />
          <button class="btn" onclick="addStat()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveStats()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å Stats</button>
        </div>
      </div>

      <!-- FACILITIES -->
      <div class="card">
        <h2>Facilities</h2>
        <div class="preview-box" id="facilitiesPreviewBox"></div>
        <div class="row-inline">
          <input id="facIcon" placeholder="üèõÔ∏è" style="width: 80px" />
          <input id="facTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫" />
          <input id="facDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" style="min-width: 260px" />
          <button class="btn" onclick="addFacility()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveFacilities()">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å Facilities
          </button>
        </div>
      </div>

      <!-- TESTIMONIALS -->
      <div class="card">
        <h2>Testimonials</h2>
        <div class="preview-box" id="testimonialsPreviewBox"></div>
        <div class="row-inline">
          <input
            id="testText"
            placeholder="–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞"
            style="min-width: 260px"
          />
          <input id="testAuthor" placeholder="–ê–≤—Ç–æ—Ä" />
          <button class="btn" onclick="addTestimonial()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveTestimonials()">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å Testimonials
          </button>
        </div>
      </div>

      <!-- CTA -->
      <div class="card">
        <h2>CTA</h2>
        <div class="preview-box" id="ctaPreviewBox"></div>
        <div class="row-inline">
          <input id="ctaTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ CTA" />
          <input id="ctaText" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" style="min-width: 260px" />
          <input id="ctaBtn" placeholder="–ö–Ω–æ–ø–∫–∞" />
          <input id="ctaHref" placeholder="./order.htm" />
        </div>
        <div class="row-inline">
          <button class="btn" onclick="saveCTA()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å CTA</button>
        </div>
      </div>
    </div>

    <script>
      const KEY = "about_page_v2";
      let content = JSON.parse(localStorage.getItem(KEY) || "{}");

      // ----- HELPERS -----
      const save = () => localStorage.setItem(KEY, JSON.stringify(content));
      const fileToDataURL = (f) =>
        new Promise((res) => {
          let r = new FileReader();
          r.onload = (e) => res(e.target.result);
          r.readAsDataURL(f);
        });

      function ensureDefaults() {
        // –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –ø—É—Å—Ç–æ–π ‚Äî –∑–∞–ø–æ–ª–Ω—è–µ–º –¥–µ—Ñ–æ–ª—Ç–∞–º–∏ –∏–∑ —Ä–∞–∑–º–µ—Ç–∫–∏ about.html
        if (!content.hero)
          content.hero = {
            title: "–û –¢–∞–Ω—Ü–µ–≤–∞–ª—å–Ω–æ–π –ê–∫–∞–¥–µ–º–∏–∏",
            text: "–ú—ã ‚Äî –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Ä–æ—Å—Ç–∞ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–∞–Ω–µ—Ü, –º–æ–¥–µ–ª–∏–Ω–≥, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–∞–ª–µ—Ç –∏ –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞. –°–æ—á–µ—Ç–∞–µ–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –∏ –∑–∞–±–æ—Ç—É, —ç—Å—Ç–µ—Ç–∏–∫—É –∏ —Å–≤–æ–±–æ–¥—É –¥–≤–∏–∂–µ–Ω–∏—è.",
            tags: ["Contemporary", "–ú–æ–¥–µ–ª–∏–Ω–≥", "–ë–∞–ª–µ—Ç", "–ì–∏–º–Ω–∞—Å—Ç–∏–∫–∞"],
            img: "assets/img/1.jpg",
          };
        if (!content.mission)
          content.mission = {
            title: "–ù–∞—à–∞ –º–∏—Å—Å–∏—è",
            text: "–°–æ–∑–¥–∞–≤–∞—Ç—å –±–µ—Ä–µ–∂–Ω—É—é —Å—Ä–µ–¥—É –æ–±—É—á–µ–Ω–∏—è, –≥–¥–µ –∫–∞–∂–¥–∞—è –ª–∏—á–Ω–æ—Å—Ç—å —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª. –ú—ã –≤–µ—Ä–∏–º –≤ —Å–∏–ª—É —Ç–µ—Ö–Ω–∏–∫–∏ –∏ –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è: –æ—Ç –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–π –±–∞–∑—ã –¥–æ –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–æ–≤.",
            bullets: [
              "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-—à–∏—Ç—ã –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤",
              "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç—É–¥–∏–∏, –∑–µ—Ä–∫–∞–ª—å–Ω—ã–µ –∑–∞–ª—ã, –º—è–≥–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ",
              "–ü—É–±–ª–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑—ã, –∫–æ–Ω–∫—É—Ä—Å—ã –∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ-—Å—ä—ë–º–∫–∏",
            ],
            img: "assets/img/2.jpg",
          };
        if (!Array.isArray(content.disciplines))
          content.disciplines = [
            {
              title: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–∞–Ω–µ—Ü",
              desc: "–†–∞–±–æ—Ç–∞ —Å —Ç–µ–ª–µ—Å–Ω–æ–π –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å—é, –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏—è, –ø–∞—Ä—Ç–µ—Ä-—Ç–µ—Ö–Ω–∏–∫–∞ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è.",
              img: "assets/img/3.jpg",
            },
            {
              title: "–ú–æ–¥–µ–ª–∏–Ω–≥",
              desc: "–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–∞–Ω–∫–∏ –∏ –ø–æ—Ö–æ–¥–∫–∏, –ø–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å—ä—ë–º–∫–∞ –ª—É–∫–æ–≤, —Ä–∞–∑–≤–∏—Ç–∏–µ –ø–ª–∞—Å—Ç–∏–∫–∏ –∫–∞–¥—Ä–∞.",
              img: "assets/img/4.jpg",
            },
            {
              title: "–ë–∞–ª–µ—Ç",
              desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —à–∫–æ–ª–∞: —ç–∫–∑–µ—Ä—Å–∏—Å —É —Å—Ç–∞–Ω–∫–∞, adagios –∏ allegros, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –∏ —Å—Ç–∏–ª—å.",
              img: "assets/img/5.jpg",
            },
            {
              title: "–ì–∏–º–Ω–∞—Å—Ç–∏–∫–∞",
              desc: "–†–∞—Å—Ç—è–∂–∫–∞, –∞–∫—Ä–æ–±–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–æ—Ä–ø—É—Å–∞ –¥–ª—è —Å—Ü–µ–Ω—ã –∏ —Å–ø–æ—Ä—Ç–∞.",
              img: "assets/img/6.jpg",
            },
          ];
        if (!Array.isArray(content.stats))
          content.stats = [
            { value: "10+", label: "–ª–µ—Ç –æ–ø—ã—Ç–∞" },
            { value: "600+", label: "–≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤" },
            { value: "4", label: "–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è" },
            { value: "10", label: "–ø–µ–¥–∞–≥–æ–≥–æ–≤" },
          ];
        if (!Array.isArray(content.facilities))
          content.facilities = [
            {
              icon: "üèõÔ∏è",
              title: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–ª—ã",
              desc: "–ó–µ—Ä–∫–∞–ª–∞, —Å—Ç–∞–Ω–∫–∏, –∫–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –∞–º–æ—Ä—Ç–∏–∑–∏—Ä—É—é—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ.",
            },
            {
              icon: "üé•",
              title: "–ú–µ–¥–∏–∞-–∫–æ–º–Ω–∞—Ç–∞",
              desc: "–°—ä—ë–º–∫–∞ –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–æ–≤, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ –≤–∏–¥–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.",
            },
            {
              icon: "üßò",
              title: "–ó–æ–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è",
              desc: "–†–∞—Å—Ç—è–∂–∫–∞, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞ —Å –¥—ã—Ö–∞–Ω–∏–µ–º –∏ —Ç–µ–ª–µ—Å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º.",
            },
            {
              icon: "üìÖ",
              title: "–ì–∏–±–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ",
              desc: "–£—Ç—Ä–µ–Ω–Ω–∏–µ –∏ –≤–µ—á–µ—Ä–Ω–∏–µ –≥—Ä—É–ø–ø—ã, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è.",
            },
          ];
        if (!Array.isArray(content.testimonials))
          content.testimonials = [
            {
              text: "¬´–ó–¥–µ—Å—å —è –≤–ø–µ—Ä–≤—ã–µ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ —Å—Ü–µ–Ω–µ. –ü–µ–¥–∞–≥–æ–≥–∏ ‚Äî –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ!¬ª",
              author: "‚Äî –ù–∞—Ä–º–∏–Ω, –≤—ã–ø—É—Å–∫–Ω–∏—Ü–∞",
            },
            {
              text: "¬´–ë–∞–ª–∞–Ω—Å —Ç–µ—Ö–Ω–∏–∫–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞. –î–æ—á—å –ø–æ–ª—é–±–∏–ª–∞ –∏ –±–∞–ª–µ—Ç, –∏ –≥–∏–º–Ω–∞—Å—Ç–∏–∫—É.¬ª",
              author: "‚Äî –≠–ª—å–¥–∞—Ä, —Ä–æ–¥–∏—Ç–µ–ª—å",
            },
          ];
        if (!content.cta)
          content.cta = {
            title: "–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?",
            text: "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –Ω–∞ –ø—Ä–æ–±–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ ‚Äî –º—ã –ø–æ–¥–±–µ—Ä—ë–º —É—Ä–æ–≤–µ–Ω—å –∏ –≥—Ä—É–ø–ø—É.",
            btn: "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–±–Ω—ã–π",
            href: "./order.htm",
          };
      }
      ensureDefaults();

      // ================= HERO =================
      function renderHero() {
        const box = document.getElementById("heroPreviewBox");
        box.innerHTML = `
          <div class="item-line">
            <div style="flex:1 1 320px">
              <h3 style="margin:0">${content.hero?.title || ""}</h3>
              <p style="margin:6px 0">${content.hero?.text || ""}</p>
              <div>${(content.hero?.tags || [])
                .map((t) => `<span class="badge">${t}</span>`)
                .join(" ")}</div>
            </div>
            <div>
              ${
                content.hero?.img
                  ? `<img src="${content.hero.img}" class="preview-img" alt="Hero">`
                  : ""
              }
            </div>
          </div>
        `;
        document.getElementById("heroTitle").value = content.hero?.title || "";
        document.getElementById("heroText").value = content.hero?.text || "";
        document.getElementById("heroTags").value = (
          content.hero?.tags || []
        ).join(";");
        const prev = document.getElementById("heroImgPreview");
        if (content.hero?.img) {
          prev.src = content.hero.img;
          prev.style.display = "block";
        } else {
          prev.src = "";
          prev.style.display = "none";
        }
      }
      async function saveHero() {
        content.hero = {
          title: document.getElementById("heroTitle").value,
          text: document.getElementById("heroText").value,
          tags: document
            .getElementById("heroTags")
            .value.split(";")
            .map((s) => s.trim())
            .filter(Boolean),
          img: content.hero?.img || "",
        };
        const file = document.getElementById("heroImg").files[0];
        if (file) content.hero.img = await fileToDataURL(file);
        save();
        renderHero();
      }
      function removeHeroImage() {
        if (content.hero) {
          content.hero.img = "";
          save();
          renderHero();
        }
        const inp = document.getElementById("heroImg");
        if (inp) inp.value = "";
      }
      document
        .getElementById("heroRemoveBtn")
        .addEventListener("click", removeHeroImage);
      document
        .getElementById("heroImg")
        .addEventListener("change", async (e) => {
          const f = e.target.files?.[0];
          if (!f) return;
          const reader = new FileReader();
          reader.onload = () => {
            const prev = document.getElementById("heroImgPreview");
            prev.src = reader.result;
            prev.style.display = "block";
          };
          reader.readAsDataURL(f);
        });

      // ================= MISSION =================
      function renderMission() {
        const box = document.getElementById("missionPreviewBox");
        box.innerHTML = `
          <div class="item-line">
            <div style="flex:1 1 320px">
              <h3 style="margin:0">${content.mission?.title || ""}</h3>
              <p style="margin:6px 0">${content.mission?.text || ""}</p>
              <ul style="margin:6px 0 0 18px">${(content.mission?.bullets || [])
                .map((b) => `<li>${b}</li>`)
                .join("")}</ul>
            </div>
            <div>
              ${
                content.mission?.img
                  ? `<img src="${content.mission.img}" class="preview-img" alt="Mission">`
                  : ""
              }
            </div>
          </div>
        `;
        document.getElementById("missionTitle").value =
          content.mission?.title || "";
        document.getElementById("missionText").value =
          content.mission?.text || "";
        document.getElementById("missionBullets").value = (
          content.mission?.bullets || []
        ).join("\n");
        const prev = document.getElementById("missionImgPreview");
        if (content.mission?.img) {
          prev.src = content.mission.img;
          prev.style.display = "block";
        } else {
          prev.src = "";
          prev.style.display = "none";
        }
      }
      async function saveMission() {
        content.mission = {
          title: document.getElementById("missionTitle").value,
          text: document.getElementById("missionText").value,
          bullets: document
            .getElementById("missionBullets")
            .value.split("\n")
            .map((s) => s.trim())
            .filter(Boolean),
          img: content.mission?.img || "",
        };
        const f = document.getElementById("missionImg").files[0];
        if (f) content.mission.img = await fileToDataURL(f);
        save();
        renderMission();
      }
      function removeMissionImage() {
        if (content.mission) {
          content.mission.img = "";
          save();
          renderMission();
        }
        const inp = document.getElementById("missionImg");
        if (inp) inp.value = "";
      }
      document
        .getElementById("missionRemoveBtn")
        .addEventListener("click", removeMissionImage);
      document
        .getElementById("missionImg")
        .addEventListener("change", async (e) => {
          const f = e.target.files?.[0];
          if (!f) return;
          const reader = new FileReader();
          reader.onload = () => {
            const prev = document.getElementById("missionImgPreview");
            prev.src = reader.result;
            prev.style.display = "block";
          };
          reader.readAsDataURL(f);
        });

      // ================= DISCIPLINES =================
      function renderDisciplines() {
        const box = document.getElementById("disciplinesPreviewBox");
        box.innerHTML = (content.disciplines || [])
          .map(
            (d, i) => `
            <div class="item-line">
              <div style="flex:1 1 320px">
                <b>${i + 1}. ${d.title || ""}</b><br>
                <span>${d.desc || ""}</span>
                <div class="row-inline" style="margin-top:8px">
                  <button class="btn btn-ghost" onclick="removeDisciplineImage(${i})">–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ</button>
                  <button class="btn btn-danger" onclick="removeDiscipline(${i})">–£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
                </div>
              </div>
              <div>
                ${
                  d.img
                    ? `<img src="${d.img}" class="preview-img" alt="Disc ${
                        i + 1
                      }">`
                    : ""
                }
              </div>
            </div>
          `
          )
          .join("");
      }
      async function addDiscipline() {
        const t = document.getElementById("discTitle").value.trim();
        const d = document.getElementById("discDesc").value.trim();
        let img = "";
        const f = document.getElementById("discImg").files[0];
        if (f) img = await fileToDataURL(f);
        if (!content.disciplines) content.disciplines = [];
        content.disciplines.push({ title: t, desc: d, img });
        // –æ—á–∏—Å—Ç–∏–º —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        document.getElementById("discTitle").value = "";
        document.getElementById("discDesc").value = "";
        document.getElementById("discImg").value = "";
        save();
        renderDisciplines();
      }
      function saveDisciplines() {
        save();
        renderDisciplines();
      }
      // —É–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ —É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
      window.removeDisciplineImage = function (idx) {
        if (!Array.isArray(content.disciplines)) return;
        if (!content.disciplines[idx]) return;
        content.disciplines[idx].img = "";
        save();
        renderDisciplines();
      };
      // —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
      window.removeDiscipline = function (idx) {
        if (!Array.isArray(content.disciplines)) return;
        content.disciplines.splice(idx, 1);
        save();
        renderDisciplines();
      };

      // ================= STATS =================
      function renderStats() {
        const box = document.getElementById("statsPreviewBox");
        box.innerHTML = (content.stats || [])
          .map(
            (s, i) => `
            <div class="item-line">
              <div style="flex:1 1 auto"><b>${s.value || ""}</b> ${
              s.label || ""
            }</div>
              <div class="row-inline">
                <button class="btn btn-danger" onclick="removeStat(${i})">–£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
              </div>
            </div>
          `
          )
          .join("");
      }
      function addStat() {
        if (!content.stats) content.stats = [];
        content.stats.push({
          value: document.getElementById("statValue").value,
          label: document.getElementById("statLabel").value,
        });
        // –æ—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        document.getElementById("statValue").value = "";
        document.getElementById("statLabel").value = "";
        save();
        renderStats();
      }
      function saveStats() {
        save();
        renderStats();
      }
      window.removeStat = function (idx) {
        if (!Array.isArray(content.stats)) return;
        content.stats.splice(idx, 1);
        save();
        renderStats();
      };

      // ================= FACILITIES =================
      function renderFacilities() {
        const box = document.getElementById("facilitiesPreviewBox");
        box.innerHTML = (content.facilities || [])
          .map(
            (f, i) => `
            <div class="item-line">
              <div style="flex:1 1 320px">${f.icon || "‚ú®"} <b>${
              f.title || ""
            }</b> ‚Äî ${f.desc || ""}</div>
              <div class="row-inline">
                <button class="btn btn-danger" onclick="removeFacility(${i})">–£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
              </div>
            </div>
          `
          )
          .join("");
      }
      function addFacility() {
        if (!content.facilities) content.facilities = [];
        content.facilities.push({
          icon: document.getElementById("facIcon").value,
          title: document.getElementById("facTitle").value,
          desc: document.getElementById("facDesc").value,
        });
        // –æ—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
        document.getElementById("facIcon").value = "";
        document.getElementById("facTitle").value = "";
        document.getElementById("facDesc").value = "";
        save();
        renderFacilities();
      }
      function saveFacilities() {
        save();
        renderFacilities();
      }
      window.removeFacility = function (idx) {
        if (!Array.isArray(content.facilities)) return;
        content.facilities.splice(idx, 1);
        save();
        renderFacilities();
      };

      // ================= TESTIMONIALS =================
      function renderTestimonials() {
        const box = document.getElementById("testimonialsPreviewBox");
        box.innerHTML = (content.testimonials || [])
          .map(
            (t, i) => `
            <div class="item-line">
              <div style="flex:1 1 320px">
                <div style="margin-bottom:6px">"${t.text || ""}"</div>
                <i>${t.author || ""}</i>
              </div>
              <div class="row-inline">
                <button class="btn btn-danger" onclick="removeTestimonial(${i})">–£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
              </div>
            </div>
          `
          )
          .join("");
      }
      function addTestimonial() {
        if (!content.testimonials) content.testimonials = [];
        content.testimonials.push({
          text: document.getElementById("testText").value,
          author: document.getElementById("testAuthor").value,
        });
        // –æ—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
        document.getElementById("testText").value = "";
        document.getElementById("testAuthor").value = "";
        save();
        renderTestimonials();
      }
      function saveTestimonials() {
        save();
        renderTestimonials();
      }
      window.removeTestimonial = function (idx) {
        if (!Array.isArray(content.testimonials)) return;
        content.testimonials.splice(idx, 1);
        save();
        renderTestimonials();
      };

      // ================= CTA =================
      function renderCTA() {
        const box = document.getElementById("ctaPreviewBox");
        box.innerHTML = `
          <div class="item-line" style="align-items:center">
            <div style="flex:1 1 320px">
              <h3 style="margin:0">${content.cta?.title || ""}</h3>
              <p style="margin:6px 0">${content.cta?.text || ""}</p>
              <div><span class="badge">${content.cta?.btn || ""}</span> ‚Üí ${
          content.cta?.href || ""
        }</div>
            </div>
          </div>
        `;
        document.getElementById("ctaTitle").value = content.cta?.title || "";
        document.getElementById("ctaText").value = content.cta?.text || "";
        document.getElementById("ctaBtn").value = content.cta?.btn || "";
        document.getElementById("ctaHref").value = content.cta?.href || "";
      }
      function saveCTA() {
        content.cta = {
          title: document.getElementById("ctaTitle").value,
          text: document.getElementById("ctaText").value,
          btn: document.getElementById("ctaBtn").value,
          href: document.getElementById("ctaHref").value,
        };
        save();
        renderCTA();
      }

      // ----- INIT -----
      renderHero();
      renderMission();
      renderDisciplines();
      renderStats();
      renderFacilities();
      renderTestimonials();
      renderCTA();
    </script>
  </body>
</html>
